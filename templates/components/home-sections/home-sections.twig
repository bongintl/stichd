{% set sections = sections ?? [] %}
{% set complex = complex is defined ? complex : false %}

{% for section in sections %}
    {% set images = [] %}
    {% switch section.type %}
        {% case 'oneImage' %}
            {% set image = complex ? section.imageComplex : section.imageSimple %}
            {% set images = [{
                image: image | length ? image.one,
                caption: complex ? section.imageCaptionComplex : section.imageCaptionSimple
            }] %}
        {% case 'twoImages' %}
            {% set leftImage = complex ? section.leftImageComplex : section.leftImageComplex %}
            {% set leftCaption = complex ? section.leftImageCaptionComplex : section.leftImageCaptionSimple %}
            {% set rightImage = complex ? section.rightImageComplex : section.rightImageComplex %}
            {% set rightCaption = complex ? section.rightImageCaptionComplex : section.rightImageCaptionSimple %}
            {% set images = [{
                image: leftImage | length ? leftImage.one,
                caption: leftCaption
            }, {
                image: rightImage | length ? rightImage.one,
                caption: rightCaption
            }] %}
    {% endswitch %}
    {% include 'components/home-section/home-section' with {
        id: section.id,
        heading: section.heading,
        body: complex ? section.bodyComplex : section.bodySimple,
        textSize: complex ? 'm' : 'l',
        link: section.entry | length ? section.entry.one.url,
        borderTop: loop.index > 1,
        images: images
    } only %}
{% endfor %}